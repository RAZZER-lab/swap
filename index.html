<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethereum Wallet Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        :root {
            --primary: #627eea;
            --primary-dark: #4c63d2;
            --secondary: #f5f7fa;
            --text: #2c3e50;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --border: #e1e8ed;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f9fafb;
            color: var(--text);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        h1 {
            color: var(--primary);
            font-size: 1.8rem;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .card-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--text);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .wallet-display {
            display: none;
        }
        
        .wallet-item {
            margin-bottom: 20px;
        }
        
        .wallet-label {
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }
        
        .wallet-value {
            background-color: var(--secondary);
            padding: 10px;
            border-radius: 4px;
            word-break: break-all;
            font-family: monospace;
            position: relative;
        }
        
        .copy-btn {
            position: absolute;
            right: 10px;
            top: 10px;
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .warning-box {
            background-color: #fff9e6;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .success-box {
            background-color: #e6f9f0;
            border-left: 4px solid var(--success);
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .error-box {
            background-color: #ffeaea;
            border-left: 4px solid var(--danger);
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .paper-wallet {
            display: none;
            margin-top: 30px;
        }
        
        .paper-wallet-content {
            background-color: white;
            border: 2px dashed var(--border);
            padding: 30px;
            text-align: center;
        }
        
        .paper-wallet-header {
            margin-bottom: 30px;
        }
        
        .paper-wallet-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .paper-wallet-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .paper-wallet-section {
            border: 1px solid var(--border);
            padding: 20px;
            border-radius: 4px;
        }
        
        .paper-wallet-section-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .paper-wallet-value {
            font-family: monospace;
            word-break: break-all;
            margin-bottom: 15px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-right: 10px;
        }
        
        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .library-error {
            background-color: #ffeaea;
            border-left: 4px solid var(--danger);
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .api-info {
            background-color: #e6f0ff;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .api-info code {
            background-color: var(--secondary);
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        @media print {
            body {
                background-color: white;
            }
            
            .no-print {
                display: none;
            }
            
            .paper-wallet {
                display: block !important;
            }
            
            .paper-wallet-content {
                border: none;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Ethereum Wallet Generator</h1>
        </div>
    </header>
    
    <div class="container">
        <div class="library-error" id="libraryError">
            <strong>‚ùå Library Loading Error:</strong> Failed to load the ethers.js library. Please check your internet connection and refresh the page.
        </div>
        
        <div class="warning-box">
            <strong>‚ö†Ô∏è Important Security Notice:</strong> This tool runs entirely in your browser. No data is sent to any server. For maximum security, use this tool on an offline computer after disconnecting from the internet. Never share your private key with anyone.
        </div>
        
        <div class="api-info">
            <strong>üìã API Usage:</strong> This wallet generator can be used programmatically. The generated wallet data is stored in <code>window.currentWallet</code> object with properties: <code>address</code>, <code>privateKey</code>, and <code>mnemonic</code>.
        </div>
        
        <div class="card">
            <h2 class="card-title">Generate New Wallet</h2>
            <button id="generateBtn" class="btn">Generate New Wallet</button>
            
            <div id="walletDisplay" class="wallet-display">
                <div class="tabs">
                    <div class="tab active" data-tab="details">Wallet Details</div>
                    <div class="tab" data-tab="paper">Paper Wallet</div>
                </div>
                
                <div id="detailsTab" class="tab-content active">
                    <div class="wallet-item">
                        <span class="wallet-label">Public Address:</span>
                        <div class="wallet-value">
                            <span id="address"></span>
                            <button class="copy-btn" data-copy="address">Copy</button>
                        </div>
                    </div>
                    
                    <div class="wallet-item">
                        <span class="wallet-label">Private Key:</span>
                        <div class="wallet-value">
                            <span id="privateKey"></span>
                            <button class="copy-btn" data-copy="privateKey">Copy</button>
                        </div>
                    </div>
                    
                    <div class="wallet-item">
                        <span class="wallet-label">Mnemonic Phrase (12 words):</span>
                        <div class="wallet-value">
                            <span id="mnemonic"></span>
                            <button class="copy-btn" data-copy="mnemonic">Copy</button>
                        </div>
                    </div>
                </div>
                
                <div id="paperTab" class="tab-content">
                    <div class="paper-wallet">
                        <div class="paper-wallet-content">
                            <div class="paper-wallet-header">
                                <div class="paper-wallet-title">ETHEREUM PAPER WALLET</div>
                            </div>
                            
                            <div class="paper-wallet-grid">
                                <div class="paper-wallet-section">
                                    <div class="paper-wallet-section-title">PUBLIC ADDRESS</div>
                                    <div class="paper-wallet-value" id="paperAddress"></div>
                                </div>
                                
                                <div class="paper-wallet-section">
                                    <div class="paper-wallet-section-title">PRIVATE KEY</div>
                                    <div class="paper-wallet-value" id="paperPrivateKey"></div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <div class="paper-wallet-section-title">MNEMONIC PHRASE</div>
                                <div class="paper-wallet-value" id="paperMnemonic"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="no-print" style="margin-top: 20px;">
                        <button id="printBtn" class="btn btn-secondary">Print Paper Wallet</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Check if ethers library loaded properly
        window.addEventListener('load', function() {
            if (typeof ethers === 'undefined') {
                document.getElementById('libraryError').style.display = 'block';
                document.getElementById('generateBtn').disabled = true;
                document.getElementById('generateBtn').textContent = 'Library Loading Failed';
                return;
            }
            
            // Initialize the app once the library is loaded
            initializeApp();
        });
        
        function initializeApp() {
            // Generate a new wallet
            document.getElementById('generateBtn').addEventListener('click', function() {
                try {
                    const wallet = ethers.Wallet.createRandom();
                    
                    // Store wallet data in global object for API access
                    window.currentWallet = {
                        address: wallet.address,
                        privateKey: wallet.privateKey,
                        mnemonic: wallet.mnemonic.phrase
                    };
                    
                    // Display wallet details
                    document.getElementById('address').textContent = wallet.address;
                    document.getElementById('privateKey').textContent = wallet.privateKey;
                    document.getElementById('mnemonic').textContent = wallet.mnemonic.phrase;
                    
                    // Update paper wallet
                    document.getElementById('paperAddress').textContent = wallet.address;
                    document.getElementById('paperPrivateKey').textContent = wallet.privateKey;
                    document.getElementById('paperMnemonic').textContent = wallet.mnemonic.phrase;
                    
                    // Show wallet display
                    document.getElementById('walletDisplay').style.display = 'block';
                    
                    // Show success message
                    showSuccess('New wallet generated successfully!');
                    
                    // Log wallet data to console for debugging
                    console.log('Generated wallet:', window.currentWallet);
                    
                } catch (error) {
                    console.error('Error generating wallet:', error);
                    showError('Failed to generate wallet: ' + error.message);
                }
            });
            
            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + 'Tab').classList.add('active');
                });
            });
            
            // Copy to clipboard functionality
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const copyId = this.getAttribute('data-copy');
                    const textToCopy = document.getElementById(copyId).textContent;
                    
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        const originalText = this.textContent;
                        this.textContent = 'Copied!';
                        setTimeout(() => {
                            this.textContent = originalText;
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                    });
                });
            });
            
            // Print paper wallet
            document.getElementById('printBtn').addEventListener('click', function() {
                window.print();
            });
            
            // Helper functions
            function showSuccess(message) {
                document.getElementById('successMessage').textContent = message;
                document.getElementById('successBox').style.display = 'block';
                document.getElementById('errorBox').style.display = 'none';
                
                // Hide after 5 seconds
                setTimeout(() => {
                    document.getElementById('successBox').style.display = 'none';
                }, 5000);
            }
            
            function showError(message) {
                document.getElementById('errorMessage').textContent = message;
                document.getElementById('errorBox').style.display = 'block';
                document.getElementById('successBox').style.display = 'none';
                
                // Hide after 5 seconds
                setTimeout(() => {
                    document.getElementById('errorBox').style.display = 'none';
                }, 5000);
            }
        }
    </script>
</body>
</html>
